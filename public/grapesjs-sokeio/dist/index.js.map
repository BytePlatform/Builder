{"version":3,"file":"index.js","mappings":"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","sources":["webpack://grapesjs-sokeio/webpack/universalModuleDefinition","webpack://grapesjs-sokeio/webpack/bootstrap","webpack://grapesjs-sokeio/webpack/runtime/define property getters","webpack://grapesjs-sokeio/webpack/runtime/hasOwnProperty shorthand","webpack://grapesjs-sokeio/webpack/runtime/make namespace object","webpack://grapesjs-sokeio/./src/consts.js","webpack://grapesjs-sokeio/./src/commands/shortcode.js","webpack://grapesjs-sokeio/./src/commands/template.js","webpack://grapesjs-sokeio/./src/commands/index.js","webpack://grapesjs-sokeio/./src/commands/openImport.js","webpack://grapesjs-sokeio/./src/commands/device.js","webpack://grapesjs-sokeio/./src/locale/en.js","webpack://grapesjs-sokeio/./src/index.js","webpack://grapesjs-sokeio/./src/panels.js","webpack://grapesjs-sokeio/./src/components.js","webpack://grapesjs-sokeio/./src/blocks.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-sokeio\"] = factory();\n\telse\n\t\troot[\"grapesjs-sokeio\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const cmdImport = \"gjs-open-import-webpage\";\nexport const cmdDeviceDesktop = \"set-device-desktop\";\nexport const cmdDeviceTablet = \"set-device-tablet\";\nexport const cmdDeviceMobile = \"set-device-mobile\";\nexport const cmdClear = \"canvas-clear\";\nexport const regexShortcode= /\\[([\\w-:]+)((?:\\s+\\w+\\s*=\\s*\"[^\"]*\")*)(\\](.*?)\\[\\/\\1\\]|\\s*\\/\\])/s;\n","import { regexShortcode } from \"../consts\";\n\nexport default (editor, opts = {}) => {\n  const command = editor.Commands;\n  const openDialog = function (editor, sender, model) {\n    \n    if (window.openShortcodeSetting) {\n      let div = document.createElement(\"div\");\n      div.innerHTML = regexShortcode.test(model.get(\"content\"))\n        ? model.get(\"content\")\n        : decodeURIComponent(model.view.el.getAttribute(\"data-shortcode\"));\n      let shortcodeObj = window.getShortcodeObjectFromText(div.innerText);\n      window.openShortcodeSetting(\n        editor.getContainer(),\n        shortcodeObj?.shortcode ?? \"\",\n        shortcodeObj?.attributes ?? [],\n        shortcodeObj?.content ?? \"\",\n        function ($content) {\n          model.set(\n            \"content\",\n            '<div data-gjs-type=\"shortcode\">' + $content + \"</div>\"\n          );\n          model.components('<div data-gjs-type=\"shortcode\">' + $content + \"</div>\");\n          model.trigger(\"change:content\");\n          editor.trigger(\"component:update\");\n          // model.trigger(\"change\");\n          // Render the changes\n          model.view.render();\n        },\n        function () {\n          sender.stop();\n        }\n      );\n    }\n  };\n  command.add(\"open-shortcode-dialog\", {\n    run: function (editor, sender, model) {\n      openDialog(editor, sender, model);\n    },\n  });\n};\n","export default (editor, opts = {}) => {\n  const command = editor.Commands;\n  const openDialog = function (editor, sender, model) {\n    let callback = \"eventAddComponent\" + new Date().getTime();\n\n    let modal = window.SokeioManager.openModal(\n      {\n        $url: opts.urlTemplateManager,\n        $title: opts.titleTemplateManager,\n        $size: \"modal-xl modal-fullscreen-lg-down\",\n      },\n      { callbackEvent: callback }\n    );\n    window[callback] = function (template) {\n      var newComponent = editor.DomComponents.addComponent(template);\n      // Append the new component as a child of the selected component\n      modal.hide();\n      model.components().add(newComponent);\n      model.trigger(\"change:content\");\n      editor.trigger(\"component:update\");\n      // model.trigger(\"change\");\n      // Render the changes\n      model.view.render();\n      // Render the changes\n      // editor.render();\n    };\n  };\n  command.add(\"open-template-dialog\", {\n    run: function (editor, sender, model) {\n      openDialog(editor, sender, model);\n    },\n  });\n};\n","import openImport from \"./openImport\";\nimport shortcode from \"./shortcode\";\nimport device from \"./device\";\nimport template from \"./template\";\nexport default (editor, opts = {}) => {\n  openImport(editor, opts);\n  shortcode(editor, opts);\n  device(editor, opts);\n  template(editor, opts);\n};\n","import { cmdImport } from \"./../consts\";\n\nexport default (editor, opts = {}) => {\n  const pfx = editor.getConfig(\"stylePrefix\");\n  const importLabel = opts.modalImportLabel;\n  const importCnt = opts.modalImportContent;\n\n  editor.Commands.add(cmdImport, {\n    codeViewer: null,\n    container: null,\n\n    run(editor) {\n      const codeContent =\n        typeof importCnt == \"function\" ? importCnt(editor) : importCnt;\n      const codeViewer = this.getCodeViewer();\n      editor.Modal.open({\n        title: opts.modalImportTitle,\n        content: this.getContainer(),\n      }).onceClose(() => editor.stopCommand(cmdImport));\n      codeViewer.setContent(codeContent ?? \"\");\n      codeViewer.refresh();\n      setTimeout(() => codeViewer.focus(), 0);\n    },\n\n    stop() {\n      editor.Modal.close();\n    },\n\n    getContainer() {\n      if (!this.container) {\n        const codeViewer = this.getCodeViewer();\n        const container = document.createElement(\"div\");\n        container.className = `${pfx}import-container`;\n\n        // Import Label\n        if (importLabel) {\n          const labelEl = document.createElement(\"div\");\n          labelEl.className = `${pfx}import-label`;\n          labelEl.innerHTML = importLabel;\n          container.appendChild(labelEl);\n        }\n\n        container.appendChild(codeViewer.getElement());\n\n        // Import button\n        const btnImp = document.createElement(\"button\");\n        btnImp.type = \"button\";\n        btnImp.innerHTML = opts.modalImportButton;\n        btnImp.className = `${pfx}btn-prim ${pfx}btn-import`;\n        btnImp.onclick = () => {\n          editor.Css.clear();\n          editor.setComponents(codeViewer.getContent().trim());\n          editor.Modal.close();\n        };\n        container.appendChild(btnImp);\n\n        this.container = container;\n      }\n\n      return this.container;\n    },\n\n    /**\n     * Return the code viewer instance\n     * @returns {CodeViewer}\n     */\n    getCodeViewer() {\n      if (!this.codeViewer) {\n        this.codeViewer = editor.CodeManager.createViewer({\n          codeName: \"htmlmixed\",\n          theme: \"hopscotch\",\n          readOnly: false,\n          ...opts.importViewerOptions,\n        });\n      }\n\n      return this.codeViewer;\n    },\n  });\n};\n","import {\n  cmdDeviceDesktop,\n  cmdDeviceTablet,\n  cmdDeviceMobile,\n  cmdClear,\n} from \"./../consts\";\n\nexport default (editor, opts = {}) => {\n  const Commands = editor.Commands;\n  const txtConfirm = opts.textCleanCanvas;\n  Commands.add(cmdDeviceDesktop, {\n    run: (ed) => ed.setDevice(\"Desktop\"),\n    stop: () => {},\n  });\n  Commands.add(cmdDeviceTablet, {\n    run: (ed) => ed.setDevice(\"Tablet\"),\n    stop: () => {},\n  });\n  Commands.add(cmdDeviceMobile, {\n    run: (ed) => ed.setDevice(\"Mobile portrait\"),\n    stop: () => {},\n  });\n  Commands.add(\n    cmdClear,\n    (e) => confirm(txtConfirm) && e.runCommand(\"core:canvas-clear\")\n  );\n};\n","export default {\n    'grapesjs-sokeio-builder': {\n        // 'key': 'value',\n    },\n};","import loadComponents from \"./components\";\nimport loadPanels from \"./panels\";\nimport loadCommands from \"./commands\";\nimport loadBlocks from \"./blocks\";\nimport en from \"./locale/en\";\n\nexport default (editor, opts = {}) => {\n  const options = {\n    ...{\n      i18n: {},\n      // default options\n    },\n    modalImportTitle: \"Import\",\n    modalImportButton: \"Import\",\n    modalImportLabel: \"\",\n    modalImportContent: \"\",\n    importViewerOptions: {},\n    textCleanCanvas: \"Are you sure you want to clear the canvas?\",\n    showStylesOnChange: true,\n    useCustomTheme: true,\n    titleTemplateManager: \"Template Manager\",\n    urlTemplateManager: \"\",\n    useRenderShortcode: false,\n    ...opts,\n  };\n  // Add panels\n  loadPanels(editor, options);\n  // Add commands\n  loadCommands(editor, options);\n  // Add components\n  loadComponents(editor, options);\n  // Add blocks\n  loadBlocks(editor, options);\n  // Load i18n files\n  editor.I18n &&\n    editor.I18n.addMessages({\n      en,\n      ...options.i18n,\n    });\n\n  editor.on(\"component:selected\", function (model) {\n    if (model && model.get(\"type\") === \"shortcode\") {\n      editor.runCommand(\"open-shortcode-dialog\", model);\n      return;\n    }\n    const commandToAdd = \"open-template-dialog\";\n    const commandIcon = \"fa fa-clock\";\n\n    // get the selected componnet and its default toolbar\n    const selectedComponent = editor.getSelected();\n    const defaultToolbar = selectedComponent.get(\"toolbar\");\n\n    // check if this command already exists on this component toolbar\n    const commandExists = defaultToolbar.some(\n      (item) => item.command === commandToAdd\n    );\n\n    // if it doesn't already exist, add it\n    if (!commandExists) {\n      console.log(defaultToolbar);\n      selectedComponent.set({\n        toolbar: [\n          {\n            label:\n              '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"2em\" viewBox=\"0 0 448 512\"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d=\"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM200 344V280H136c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H248v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z\"/></svg>',\n            command: commandToAdd,\n          },\n          ...defaultToolbar,\n        ],\n      });\n    }\n  });\n\n  editor.on(\"component:deselected\", function (model) {\n    model.view.el.querySelector(\".div-builder-component-plus\")?.remove();\n  });\n  editor.on(\"component:dblclick\", function (model) {\n    if (model && model.get(\"type\") === \"shortcode\") {\n      editor.runCommand(\"open-shortcode-dialog\", model);\n    }\n  });\n  editor.on(\"block:drag:stop\", function (model) {\n    if (model && model.get(\"type\") === \"shortcode\") {\n      editor.runCommand(\"open-shortcode-dialog\", model);\n    }\n  });\n  // TODO Remove\n  // editor.on('load', () =>\n  //   editor.addComponents(\n  //       `<div style=\"margin:100px; padding:25px;\">\n  //           Content loaded from the plugin\n  //       </div>`,\n  //       { at: 0 }\n  //   ))\n};\n","import {\n  cmdImport,\n  cmdDeviceDesktop,\n  cmdDeviceTablet,\n  cmdDeviceMobile,\n  cmdClear,\n} from \"./consts\";\nexport default (editor, opts = {}) => {\n  const panels = editor.Panels;\n  opts.showDevices = false;\n  const swv = \"sw-visibility\";\n  const expt = \"export-template\";\n  const osm = \"open-sm\";\n  const otm = \"open-tm\";\n  const ola = \"open-layers\";\n  const obl = \"open-blocks\";\n  const ful = \"fullscreen\";\n  const prv = \"preview\";\n  const iconStyle = 'style=\"display: block; max-width:22px\"';\n  console.log(\"grapesjs-sokeio\");\n  panels.getPanels().reset([\n    {\n      id: \"commands\",\n      el: \".sokeio-builder-manager .commands-panel-manager\",\n      buttons: [{}],\n    },\n    {\n      id: \"devices-c\",\n      el: \".sokeio-builder-manager .devices-panel-manager\",\n      buttons: [\n        {\n          id: cmdDeviceDesktop,\n          command: cmdDeviceDesktop,\n          active: true,\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z\" />\n      </svg>`,\n        },\n        {\n          id: cmdDeviceTablet,\n          command: cmdDeviceTablet,\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z\" />\n      </svg>`,\n        },\n        {\n          id: cmdDeviceMobile,\n          command: cmdDeviceMobile,\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z\" />\n      </svg>`,\n        },\n      ],\n    },\n    {\n      id: \"options\",\n      el: \".sokeio-builder-manager .options-panel-manager\",\n      buttons: [\n        {\n          id: swv,\n          command: swv,\n          context: swv,\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n      <path fill=\"currentColor\" d=\"M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z\" />\n  </svg>`,\n        },\n        {\n          id: prv,\n          context: prv,\n          command: () => editor.runCommand(prv),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\"></path></svg>`,\n        },\n        {\n          id: ful,\n          command: ful,\n          context: ful,\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z\" />\n      </svg>`,\n        },\n        {\n          id: expt,\n          command: () => editor.runCommand(expt),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z\" />\n      </svg>`,\n        },\n        {\n          id: \"undo\",\n          command: () => editor.runCommand(\"core:undo\"),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z\" />\n      </svg>`,\n        },\n        {\n          id: \"redo\",\n          command: () => editor.runCommand(\"core:redo\"),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z\" />\n      </svg>`,\n        },\n        {\n          id: cmdImport,\n          command: () => editor.runCommand(cmdImport),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z\" />\n      </svg>`,\n        },\n        {\n          id: cmdClear,\n          command: () => editor.runCommand(cmdClear),\n          label: `<svg ${iconStyle} viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" />\n        </svg>`,\n        },\n        {\n          id: \"save-builder-html\",\n          className: \"fa fa-save\",\n          command: \"sokeio-builder-save-data\",\n          label: \"<span style='margin-left: 5px;'>Publish</span>\",\n          attributes: {\n            title: \"Publish\",\n          },\n        },\n      ],\n    },\n  ]);\n};\n","import { regexShortcode } from \"./consts\";\n\nexport default (editor, opts = {}) => {\n  const domc = editor.Components;\n  const cm = editor.Commands;\n  const pfx = editor.Config.stylePrefix;\n  const { useRenderShortcode } = opts;\n  // editor.on(\"run:preview\", (data) => {\n  //   console.log(\"run preview\", isPreview(), data);\n  //   document.querySelector(\n  //     \".sokeio-builder-header__right .options-panel-manager\"\n  //   ).innerHTML = \"\";\n  //   editor.stopCommand(\"sw-visibility\");\n  //   editor.render();\n  //   setTimeout(() => {\n  //     editor.getModel().stopDefault();\n  //     const editorEl = editor.editorView.el;\n  //     console.log({ editor });\n  //     if (editorEl.querySelector(`${pfx}off-prv`)) return;\n  //     const helper = document.createElement(\"span\");\n  //     helper.className = `${pfx}off-prv fa fa-eye-slash`;\n  //     editorEl.appendChild(helper);\n  //     helper.onclick = () => editor.stopCommand(\"preview\");\n  //   }, 100);\n  // });\n  // editor.on(\"stop:preview\", () => {\n  //   console.log([\"stop preview\", isPreview()]);\n  //   editor.refres();\n  // });\n  domc.addType(\"shortcode\", {\n    isComponent: (el) =>\n      // el.tagName === \"DIV\" &&\n      el.childElementCount == 0 &&\n      regexShortcode.test(el.innerText),\n    model: {\n      defaults: {\n        tagName: \"\",\n        name: \"shortcode\",\n        draggable: true,\n        droppable: false,\n        removed: false,\n        content: '<div data-gjs-type=\"shortcode\"></div>',\n      },\n    },\n\n    view: {\n      async onRender({ model }) {\n        let html = this.el.innerHTML;\n        if (!useRenderShortcode) return;\n        if (regexShortcode.test(html) || regexShortcode.test(model.content)) {\n          let $wireId = Alpine.closestRoot(\n            editor.editorView.$el[0]\n          )?.getAttribute(\"wire:id\");\n          if ($wireId) {\n            let shortcode = this.el.innerHTML;\n            if (regexShortcode.test(model.content)) {\n              shortcode = model.content;\n            }\n            let content = await Livewire.find($wireId).ConvertShortcodeToHtml(\n              shortcode\n            );\n            if (this.el.getAttribute(\"data-gjs-type\") === \"shortcode\") {\n              this.el.innerHTML = `${content}`;\n              this.el.setAttribute(\"data-shortcode\", encodeURIComponent(html));\n            } else {\n              this.el.innerHTML = `<div data-gjs-type=\"shortcode\">${content}</div>`;\n              this.el.setAttribute(\n                \"data-shortcode\",\n                encodeURIComponent(\n                  '<div data-gjs-type=\"shortcode\">' + html + \"</div>\"\n                )\n              );\n            }\n          }\n        }\n      },\n    },\n  });\n  editor.on(\"component:styleUpdate\", function (model) {\n    if (model && model.get(\"type\") === \"shortcode\") {\n      // Áp dụng kiểu CSS cho thành phần block shortcode trong canvas\n      model.set({\n        style: {\n          \"min-height\": \"50px\",\n          padding: \"20px\",\n          border: \"1px dashed #ccc\",\n          \"background-color\": \"rgba(0,0,0,0.1)\",\n          // Các thuộc tính style khác tùy ý\n        },\n      });\n    }\n  });\n};\n","export default (editor, opts = {}) => {\n  const bm = editor.BlockManager;\n\n  bm.add(\"shortcode\", {\n    label: \"ShortCode\",\n    category: \"Common\",\n    content: '<div data-gjs-type=\"shortcode\"></div>',\n    media:\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 448 512\"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d=\"M80 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48zm80-24c0 32.8-19.7 61-48 73.3V192c0 17.7 14.3 32 32 32H304c17.7 0 32-14.3 32-32V153.3C307.7 141 288 112.8 288 80c0-44.2 35.8-80 80-80s80 35.8 80 80c0 32.8-19.7 61-48 73.3V192c0 53-43 96-96 96H256v70.7c28.3 12.3 48 40.5 48 73.3c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-32.8 19.7-61 48-73.3V288H144c-53 0-96-43-96-96V153.3C19.7 141 0 112.8 0 80C0 35.8 35.8 0 80 0s80 35.8 80 80zm208 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM248 432a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z\"/></svg>',\n  });\n};\n"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","cmdImport","cmdDeviceDesktop","cmdDeviceTablet","cmdDeviceMobile","cmdClear","regexShortcode","editor","command","Commands","add","run","sender","model","openShortcodeSetting","_shortcodeObj$shortco","_shortcodeObj$attribu","_shortcodeObj$content","div","document","createElement","innerHTML","test","decodeURIComponent","view","el","getAttribute","shortcodeObj","getShortcodeObjectFromText","innerText","getContainer","shortcode","attributes","content","$content","set","components","trigger","render","stop","openDialog","opts","arguments","length","undefined","callback","Date","getTime","modal","SokeioManager","openModal","$url","urlTemplateManager","$title","titleTemplateManager","$size","callbackEvent","template","newComponent","DomComponents","addComponent","hide","pfx","getConfig","importLabel","modalImportLabel","importCnt","modalImportContent","codeViewer","container","codeContent","getCodeViewer","Modal","open","title","modalImportTitle","onceClose","stopCommand","setContent","refresh","setTimeout","focus","close","className","concat","labelEl","appendChild","getElement","btnImp","type","modalImportButton","onclick","Css","clear","setComponents","getContent","trim","CodeManager","createViewer","codeName","theme","readOnly","importViewerOptions","openImport","txtConfirm","textCleanCanvas","ed","setDevice","e","confirm","runCommand","device","options","i18n","showStylesOnChange","useCustomTheme","useRenderShortcode","panels","Panels","showDevices","swv","expt","ful","prv","iconStyle","console","log","getPanels","reset","id","buttons","active","label","context","loadPanels","loadCommands","domc","Components","Config","stylePrefix","addType","isComponent","childElementCount","defaults","tagName","name","draggable","droppable","removed","onRender","_ref","html","_Alpine$closestRoot","$wireId","Alpine","closestRoot","editorView","$el","Livewire","find","ConvertShortcodeToHtml","setAttribute","encodeURIComponent","on","style","padding","border","loadComponents","BlockManager","category","media","loadBlocks","I18n","addMessages","en","commandToAdd","selectedComponent","getSelected","defaultToolbar","some","item","toolbar","_model$view$el$queryS","querySelector","remove"],"sourceRoot":""}