class u{_manager;getKey(){return""}manager(o){this._manager=o}getManager(){return this._manager}register(){}booting(){}booted(){}dispose(){}}class _ extends u{getKey(){return"BYTE_LIVEWIRE_GRAPESJS_MODULE"}booting(){if(window.Livewire){let n=this.getManager();window.Livewire.directive("grapesjs",({el:e,directive:l,component:i})=>{if(l.modifiers.length>0||e.livewire____grapesjs)return;let t={};e.hasAttribute("wire:grapesjs.options")&&(t=new Function(`return ${e.getAttribute("wire:grapesjs.options")};`)());const a=t.pluginManager??[];t?.pluginManager&&(t={...t,pluginManager:void 0});const g=()=>{e.livewire____grapesjs||(e.livewire____grapesjs=grapesjs.init({container:e,storageManager:!1,style:n.dataGet(i.$wire,"form.css"),components:n.dataGet(i.$wire,"form.content"),...t,plugins:a.map(function(s){return s.name}),pluginsOpts:a.reduce(function(s,r){return s[r.name]=r.options??{},s},{}),pages:!1,assetManager:{custom:{open(s){window.showFileManager(function(r){console.log(r[0].url),s.select(r[0].url),s.close()}),console.log(s)},close(s){}}}}),e.livewire____grapesjs.Commands.add("byte-builder-save-data",{run:async function(s,r){r&&r.set("active",0),n.dataSet(i.$wire,"form.css",e.livewire____grapesjs.getCss()),n.dataSet(i.$wire,"form.content",e.livewire____grapesjs.getHtml()),n.dataSet(i.$wire,"form.js",e.livewire____grapesjs.getJs()),setTimeout(function(){i.$wire.doSaveBuilder()},700),console.log(i)}}),e.livewire____grapesjs.on("load",function(){}),e.livewire____grapesjs.on("stop:preview",()=>{console.log("byte-builder-preview2"),e.closest(".byte-builder-manager").classList.remove("byte-builder-preview")}),e.livewire____grapesjs.on("run:preview",()=>{console.log("byte-builder-preview1"),e.closest(".byte-builder-manager").classList.add("byte-builder-preview")}))};window.grapesjs?g():(window.ByteLoadStyle("https://cdn.jsdelivr.net/npm/grapesjs@0.21.6/dist/css/grapes.min.css",...a.reduce(function(s,r){return[...s,...r.css??[]]},[])),window.ByteLoadScript(["https://cdn.jsdelivr.net/npm/grapesjs@0.21.6/dist/grapes.min.js",...a.reduce(function(s,r){return[...s,...r.js??[]]},[])]).then(function(){g()}))})}}}window.addEventListener("byte::register",function(){ByteManager.registerPlugin(_)});
